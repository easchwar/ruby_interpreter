<h1>Online Ruby interpreter!</h1>

<h3>Your code here:</h3>
<div class="input">
  <form class="clearfix" action="<%= evaluations_url %>" method="post">
    <div class="input-area">
      <textarea id="code-input" name="code" rows="8" cols="40"># Type some ruby code!</textarea>
    </div>
     <button type="submit">Run</button>
  </form>
</div>

<p>Standard Out</p>
<div id="out">
</div>

<p>Return Value</p>
<div id="result">
  
</div>


<script src="repl_build/jsrepl.js"></script>

<script type="text/javascript" charset="utf-8">
  $(function() {
    var txt = document.getElementById('code-input');
    window.cm = CodeMirror.fromTextArea(txt, {
      mode: 'ruby',
      theme: 'monokai',
    });

    $('form').on('submit', function(e) {
      e.preventDefault();
      window.cm.save();
      var val = e.currentTarget[0].value;

      $('#out').empty();
      window.jsrepl.eval(val);
    });
  });
</script>
